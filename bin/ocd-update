#!/bin/sh

IGNORE_RE="^\./(README$|\.git)"
OCDDIRS="$HOME/.ocd $HOME/.ocd-private"

for ocddir in $OCDDIRS; do

  echo -n "$ocddir: "
  cd $ocddir

  files=$(find . -type f | egrep -v  "$IGNORE_RE")
  dirs=$(find . -type d | egrep -v  "$IGNORE_RE")

  for dir in $dirs; do
    mkdir -p $HOME/$dir
  done

  for file in $files; do
    echo -n .
    src="$file"
    dst="$HOME/$file"
    if [ -f $dst ]; then
      rm -f $dst
    fi
    cp --preserve=mode $file $dst
  done
  echo
done
